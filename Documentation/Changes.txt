Changes History
---------------

The original concept started out life within Repton Map Display. It became a project in it's own right on 6th December 2018.

1.05 8th December 2020
----------------------
* Ported from Delphi 10.3 to Lazarus.
* Name changed to Disc Image Manager to reflect the application's future facilities to write back to images.
* First version to appear on GitHub.
* A few spurious bugs had crept in from the conversion - disc sizes were reported as 0 bytes and the main window became sizeable.
* StatusBar update no longer functions.

1.05.1 9th December 2020
------------------------
New or improved features
* Code tidied up and compatibility Delphi removed. Now completely Object Free Pascal.
* Version numbers now remain at 1.05 with revision number following.

1.05.2 11th December 2020
-------------------------
New or improved features
* Main window is no longer sizeable, and you only now have the close button.
* Buttons are disabled when not needed, and enabled when they can be used.
* Extracted files now come with an .inf file.
* Hint for the extract file button changed from "Download File" to "Extract File(s)"
* Pop-up menu item for "Extract File" changed to "Extract File(s)"
* Now developed and distributed under the GNU GPL v3 licence.
* About dialogue window changed to reflect new licence and GitHub web address.

1.05.3 14th December 2020
-------------------------
New or improved features
* Reverted the main window to sizeable.
* Reverted to the window system icons (maximise and minimise)
* Set the initial main window size to 921x751px
* Changed the search panel around so that the search results grows and shrinks with the main window resizing.
* .inf files only now produced for DFS and ADFS
* Facility to save images back to disc added (the code had been written just not attached to any buttons or menus)
* Files can now be added to a DFS image

1.05.4 15th December 2020
-------------------------
New or improved features
* Tidy up of some code.
* Buttons moved to a ToolBar (along the top).
* Disc Info panel moved to the Status Bar (along the bottom).
* Progress parameter removed from DiscImage unit.
* Buttons added to the ToolBar: Add Files, Rename File, Delete File.
* Can now rename a DFS file.
* Can now delete DFS file(s).
* File attributes no longer displayed next to the filename in the File Details panel but have been moved to tick boxes at the bottom of the panel.
* File Details panel tidied up: fields have been moved closer together, reducing the overall size of the panel.
* File attributes can now be changed, for DFS files.

Bug fixes
* The extra Watford DFS entries would get written to the wrong places.

1.05.5 16th December 2020
-------------------------
New or improved features
* Added button for new, blank, image.
* Added dialogue box to create and format new image.
* Tidy up of code.
* Added an 'image has changed/not been saved' tracker.
* Extended the status bar to add in a 'image has changed/not been saved' indicator.
* Spread the attributes out as they were on over the top of each other in Linux.
* Status Bar is now blank with no or unknown image type.
* Spread the file details out again, and resized the labels.
* Binaries compiled in 'Release' mode to reduce final file size and increase execution speed.

Bug fixes
* Saving an image does not update the filename.
* The wrong default extension was added when saving an image when the extension was not specified.

1.05.6 21st December 2020
-------------------------
New or improved features
* Adding files will now skip over *.inf files.
* Images can be opened by dragging them into the application window.
* Files can be added to images by dragging them into the application window.
* Command line commands added - this is a work in progress.

Bug fixes
* Extracting a file from an ADFS image, where the file's indirect address was the same as the offset to the root, the root would be saved instead (and repeated for the length of the file).
* If a directory was selected as part of a multi-selection, and this directories contents where also selected, only the directory would be downloaded. Previously the contents would be downloaded twice.
* ADFS L images (*.adl) were not read interleaved, causing data corruption.
* Creating a new double sided DFS image, then writing to it, will cause the data to get written to the image as if it is a single sided image.

1.05.7 27th December 2020
-------------------------
New or improved features
* Added *.dat and *.dsc extensions for ADFS to the Open Image dialogue.
* Improved the DFS and ADFS ID routines.
* Graphical display for Free Space Map for DFS and ADFS.
* Added functionality to change disc title and boot option.
* Now displays the root address for ADFS images.
* Free space is now calculated from the free space map and not by adding up the length of files and directories.

Bug fixes
* The free space for ADFS old map are miscalculated.
* Correctly displays the selected directory title.
* The disc title on an ADFS D was not displayed correctly.

1.05.8 2nd January 2021
-----------------------
New or improved features
* In an attempt to get the colours uniform across platforms, they have been changed from a platform specific colour to a standard colour.
* Added facility to create a new, blank, ADFS floppy disc image.
* More improvements on the ADFS ID process - if an image has a boot block (F, F+ and some Hard Discs) then it will have a checksum. This is now checked.
* Added facility to re-title an ADFS image.
* Added facility to change boot option on an ADFS image.
* Saves an inf file to the spec laid out on Stardot forum.
* Now creates an inf file for directories in additition to the files within.
* Extracting files will now work if the root is selected.
* Added a main menu.
* Added some sanity checks to the command line features.
* Added facility to create a new, blank, Commodore 1541, 1571 and 1581 floppy disc image.
* Changed some of the label sizes, and fonts sizes, so that the application looks OK on Linux.

Bug fixes
* ADFS old map discs were being IDed wrongly, based on inaccurate information. This has been fixed.
* Small bug with calculating the free-space map fixed.
* A bug where extraenous spaces were not removed from the end of the disc title has been fixed.
* If an ADFS directory check byte is zero, this is now ignored.
* Selecting an item from the search window will result in a purple box on the file details section.

1.05.9 9th January 2021
-----------------------
New or improved features
* Changed the reading in of an *.inf file to match that which is saved out.
* Free space map is now calculated for Commodore 1541, 1571 and 1581 images.
* Free space map scale now changes depending on the number of tracks, meaning that it will not look 'out of focus'.
* Can update the disc name on Commodore 1541, 1571 and 1581 images.
* Major change to how data is read and written from/to the image which could slow down access but reduce bugs.
* Added facility to add files to ADFS S, M, L, & D images.
* Added facility to create new directories on ADFS S, M, L, & D images.
* Added facility to rename files and directories on ADFS S, M, L, D, E and F images.
* Will now import entire directories (if enough space, of course) into ADFS S, M, L & D images.
* ADFS S, M, L, D, E and F Directories can now be re-titled, including the root.
* Files and entire directories can now be deleted from ADFS S, M, L and D images.
* Changed some assumptions when ID-ing DFS images (number of tracks no longer has to be 40 or 80). Due to this have had to introduce an extra check (number of sectors >0) when ID-ing DFS images.
* Changed the order of ID-ing images as Commodore and Amiga could now be mistaken for DFS.

Bug fixes
* Ironed out a couple of ADFS ID-ing bugs.
* The image file size was not extended to the full extent of the disc size when adding files or directories.
* Fixed a bug when ID-ing formats to ensure one already 'claimed' for a platform does not undergo further checks for other formats.

1.05.10 23rd January 2021
-------------------------
New or improved features
* Creation of new module, introducing separate layer between the UI and the class.
* Move of some type definitions and functions/procedure from the class module to the utils module.
* Move of some functions/procedures from the UI module to the utils module.
* Moved, and separated, function for extracting files into their own respective modules.
* Can now write files and directories to New Map ADFS images (E and F).
* Improved the accuracy of gathering the free space map for ADFS New Map images.
* Fails, without crashing, if the application fails to open or create a file.
* The files are now opened non-exclusively (i.e. another application can open the file at the same time).
* Can now delete files and directories from New Map ADFS Images (E and F).
* Updated the ADFS directory checksum checking - now only ignores a zero checksum for old directories.

Bug fixes
* Found, and fixed, a major bug whereby if a file was fragmented on an ADFS New Map image, the resultant extraction of the file could be corrupted.
* Fixed a bug (or more accurately, an oversight) where the checksums where not computed and saved when retitling New Directory directories, resulting in Broken Directory errors.
* New directories being added in ADFS New Directory formats were not getting their checksum updated, resulting in a Broken Directory.

1.05.11 30th January 2021
-------------------------
New or improved features
* Files can now be written to a Commodore 1541, 1571 and 1581 image.
* Files can now be renamed on a Commodore 1541, 1571 and 1581 image.
* The system track is no longer included when computing the amount of free space on a Commodore 1541, 1571 or 1581 image.
* Attributes are now hidden when not required, instead of disabled.
* Commodore 1541, 1571 and 1581 file attributes are now shown and can be changed.
* Files extracted from Commodore 1541, 1571 and 1581 now have their filetypes appended as an extension, rather than separated with a comma.
* Files added to ADFS New Map and Commodore 1541, 1571 and 1581 images are now filetyped if the filetype is included after the filename (either separated by a comma or by a period).
* Files and directories added to or created in ADFS New Map images are now timestamped. As are untyped and unstamped files/directories if they do not have a load and execution address.
* Can now use wildcards after the --add command line option.
* More error checking performed on command lines.
* Second parameters now accepted with command line options.
* Added/updated command line options: add, create, delete, rename, and cmdfile.
* Added button to close the currently open image.
* Added a logo next to the format on the status bar.
* Made the status bar 2 pixels taller, and the 'Has Changed' panel on the status bar 4 pixels wider.
* When on the command line, errors are now not reported via the GUI, expecting a response, but by a message in the command line.
* ADFS New Map free space fragments are now consolodated if they are consecutive.
* Reports an error if any writing function is performed on ADFS New Map images which have an idlen other than 15 bits.
* Application now reports which platform and architecture the build was built on (e.g. macOS 64 bit) in the About Box.
* More detailed errors are reported when writing files or directories and they fail.

Bug fixes
* A zero length file being extracted from an image would cause the application to crash. It now reports a failure, which the front end interprets as 'file not found'.
* Deleting a file from ADFS New Map, where the file was in zone 0, would not correctly update the free space map pointers. This showed itself whereby another file could then not be added, even to a blank disc.
* If a file failed to open (not recognised, for example), the controls would still be enabled and the filename put in the title bar.

1.05.12 6th February 2021
-------------------------
New or improved features
* Refreshed the graphics. All the RISC OS filetypes have been replaced with RISC OS 5.28 Raspberry Pi filetypes, and have increased from 50 types to 136 types.
* Added more known filetype names to the DiscImage class - from 89 to 1206.
* RISC OS disc images (those with New or Big directory types) now show the Application filetype for any directories beginning with '!' in the directory list.
* A 'Progress Message' window is displayed when opening an image.
* Made writing to the ADFS free space map compatible with idlen other than 15 bits.
* When a file or directory is renamed in ADFS, it is now reordered within the catalogue to maintain alphabetical order.
* Can now drag and drop files within an image to copy or move them. This is limited to ADFS and dual-sided DFS.
* New feature where a CRC32 is calculated for the image and displayed in the Image Detail window.
* CRC32 is also now calculated per file and displayed on the file details, and saved out in the *.inf file when extracted from the image.

Bug fixes
* Writes to side 1 (:2) of a DFS disc would fail.

1.05.13 8th February 2021
-------------------------
New or improved features
* New button for the file's CRC32 which copies it onto the clipboard.
* New tool bar button to save the image's files' details out to a CSV file.
* Changed how a disc is loaded in, IDed and read.
* When dragging and dropping a file in, it is IDed to see if it is an image. If it is, and there is already an image loaded, the application will ask if it is to be loaded or added to the current image.

Bug fixes
* If an ADFS New Map's file returned no fragments then it would crash when this file was extracted from the image.

1.05.14 18th February 2021
--------------------------
New or improved features
* Double clicking on a file will open it in as a hex dump. Hex dump routine is a cut down version of File Dump.
* Added new file context menu item, and File submenu item, to open file as a hex dump.
* Added new main menu item to list the hex dump windows, and open them if clicked on.
* Added new button on the toolbar for showing a hex dump.
* New command line option 'keepopen' keeps the application open after parsing the other options.
* When moving files in ADFS only the directory reference is moved, instead of copying the file then deleting the original.
* Now copies and moves directories.
* Modified the 'Open or Add' scenario and added a third option - 'Import'. This will import the contents of another image, into the current image in the currently selected directory, the parent of the selected file, or root if nothing selected.
* The Add Files button now replicates the dropping of files onto the application.
* Changed the error reporting dialogue box.
* Changed the 'Open Image' button icon.
* New toolbar buttons: Split/Combine DFS and Repair ADFS Broken Directories.
* New menu items under File: Split/Combine DFS and Repair ADFS Broken Directories.
* Reordered the menu items on the file context menu to match the order of the toolbar buttons.
* Reordered the main menu Image menu items to match the order of the toolbar buttons.
* Added function to split a double sided DFS image (DSD) into two single sided DFS images (SSD) or combine two single sided DFS images into a single double sided image.
* Added an ellipsis to some menu items, where clicking would open a dialogue box.
* New graphics for "Add Files", "Delete Files", "Extract Files", "Open Image", "Close Image", "New Directory", "Save As CSV" & "Free Space Map" buttons; "DEL" Commodore filetype & tree icon; and "HasChanged" icon on the status bar.
* Added the application icon to the About dialogue box.
* Only reports relevant information in the File Details panel.
* Rejigged the function to calculate an ADFS directory checksum, as the parameters being passed made calling it too complicated, when these parameters can be discovered by the function.
* Added function to repair detected broken ADFS directories.
* Can now extract files using the command line options.

Bug fixes
* The application would crash if a loaded ADFS New Map image had no free space fragments.
* When moving files within an image the original tree node was not removed.
* Added a detection for the key modifier, while dragging to copy/move, but the mouse is not moving.
* When dragging to copy/move, the destination would stay highlighted when the item was dragged back to it's parent.
* Right clicking (or double finger tapping) on an object to open the menu would also trigger the drag-drop operation.
* On ADFS New Map, if a fragment of file exists after a section of free space, then it won't get read.
* With the ADFS New Map, when deleting a file the free space map is not updated correctly.
* When deleting shared objects from an ADFS New Map. The fragment is not removed if it is still being used.
* ADFS D files were no longer readable.
* ADFS New Map directories could get fragmented.
* No longer assumes the root follows the free space map on New Map ADFS.
* When a write operation occured, the position of the directories in ADFS Free Space Map would get lost.

1.05.15 27th February 2021
--------------------------
New or improved features
* When dragging and dropping items in the directory tree, the window will now autoscroll up or down if the cursor is close to the threshold.
* Removed the LoadFileFromStream method from the TDiscImage class.
* When a file is loaded it is inflated from GZip, if necessary.
* Now loads UEF files (tape format). Only supports data block 0x100, so will only load approx. 80% of UEF files.
* Can download files from UEF.
* Can import files from UEF into other filing systems.
* Removed the SaveToStream method from TDiscImage class.
* Removed the ExtractFileToStream method from TDiscImage class.
* Removed the WriteFileFromStream method from TDiscImage class.
* Removed the ReadDiscDataToStream method from TDiscImage class.
* Removed the WriteDiscDataFromStream method from TDiscImage class.
* Can save UEF files for CFS.
* Can create new, empty, UEF files for CFS.
* Can write files to CFS.
* Can change the locked attribute on CFS file.
* Can rename CFS files.
* Can delete CFS files.
* New parameter for command line option 'new' - CFS, for Cassette Filing System.
* Updated the main icon.
* Removed the separator in the File menu.
* Renamed the File menu to Image.
* Renamed the Image menu to Files.
* Created new main menu item - Tools.
* Moved the Split or Combine DFS Images to Tools.
* Moved the Fix Broken ADFS Directories to Tools.
* Added icons to the main menu and file context menu.

Bug fixes
* ADFS New directories could not be retitled.

1.05.16 - 15th March 2021
-------------------------
New or improved features
* Re-added and improved progress feedback when reading in an image.
* Now checks to see if file is GZ compressed before loading, speeding up the loading process.
* ADFS Big Directories - files and directories can now be written to, expanding or contracting as needed. *** UNTESTED ***
* Expanded command line option 'add' to specify the eventual filename, load address, execution address and attributes.
* Added new command line option 'dirtitle' to retitle a specified directory.
* Added new command line option 'access' to change the attributes on a specified file or directory.
* Expanded command line option 'save' to specifiy if a UEF is to be saved uncompressed, rather than the default compressed.

Bug fixes
* Fixed a bug I had created where a "Divide by zero" error would occur on new ADFS discs.
* Another bug that keeps cropping up is where the graphic for the Free Space Map (on the Image Details dialogue box) can grow beyond the capabilities of the compiler causing it to crash with really large images.
* If a single sided DFS disc is loaded with the 0xA00 area all zeros, it will wrongly detect it as a double sided disc.
* If a DFS file used bits 16 and 17 for the length, this was getting multiplied by 0x55 and wrongly reporting the file length. The same issue affected the execution and load addresses.
* Creating a new disc image, from the command line, did not set up any boot options so trying to change it will result in the application crashing.
* Creating a new disc image, changing the title or changing the boot option, from the command line, did not set the 'Has Changed' flag.

1.05.17 - 21st March 2021
-------------------------
New or improved features
* Tested and fixed ADFS Big Directory function to write files to a directory (after removing the lock I'd left on). Untested on root.
* ADFS Big Directories now expands and contracts when necessary.
* When adding files to ADFS New Maps, the search for free space fragments starts from the centre zone, and not zone zero.
* Can now rename files in an ADFS Big Directory. Untested on root.
* Split DFS dialogue box graphics changed slightly (source and destination drive 0 icons show a '0' while drive 2 icons show a '2').
* Zip files containing files (known as Spark archives in the application) can now be opened and the contents imported into a RISC OS ADFS image, preserving filetypes. This will only work with Zip archives.

Bug fixes
* Filetypes from imported files (as ,XXX in the filename) were not getting decoded correctly.
* Found that E+ and F+ ADFS floppy images were not getting initialised properly, putting the root in the same fragment as the system.
* The terminating CR character was not getting written for the directory name in ADFS Big Directories.
* Some files and directories where getting displayed with strange names when they contained 'top bit set' characters, particularly with ADFS Big Directory.
* Some features where failing with ADFS Big Directories because of the space character is stored with top bit set (i.e. 0xA0 instead of 0x20).
* ADFS attributes were having the 'WR' added on, even when not specified. This is now only used when nothing is specified.
* Updating the boot option or disc title was failing because of some odd logic.
* Deleting a zero length file, or one without any fragments, on an ADFS New Map would cause the application to crash.
* Attributes, apart from 'L', were getting ignored when importing files into ADFS.

1.05.18 - 25th March 2021
-------------------------
New or improved features
* Basic MMFS support has been added. Currently, an MMB file can be loaded and the contents viewed.
* Font size on directory tree has been increased slightly, from 8pt to 10pt.
* Added some more extension filters to the Open Image Dialogue box.
* File searches will now work with wildcards - * for 0 or many characters, and # for single character.
* File searches will now split the parent away from the filename, if specified.
* Command line option 'extract' will now take wildcards.
* Pressing Enter on one of the search entry boxes initiates the search, in addition to clicking on the button.
* The search entry boxes, and the search results list, have been recoloured and text style changed.
* When selecting an item from the search results it does not immediately deselect itself.

Bug fixes
* The timeout part of uncompressing files was not working, so this has been re-written.

1.05.19 - 5th April 2021
------------------------
New or improved features
* Filetype graphics changed, again, for higher resolution graphics.
* Removed the second set of image lists and now just rely on the single list and scale as appropriate.
* Figured out how to make all the panels a uniform colour, then changed them so they are now textured.
* Toolbar graphics changed, again, for higher resolution graphics. Some icons have changed completely.
* Moved the File Search to a separate window, accessible via toolbar button or menu.
* Re-arranged the File Details panel. Only fields with entries are shown.
* Made the application 'High-DPI aware', so that, hopefully, the text and graphics grow and shrink as appropriate, as demanded by the OS.
* Added a panel splitter between the Image Contents and File Details panels.
* Reduced the size of the Image Contents and File Details title.
* Image Contents has new directory arrows, and different colours for items selected.

Bug fixes
* A bug was introduced in the last version where loading an ADFS image, in most cases, left it in an infinite loop.

1.20 - 8th April 2021
---------------------
New or improved features
* Change the version numbering. We are now at 1.20, from 1.05.19.
* Expands a file's load and execution address, when imported from DFS to ADFS, from FFxxxx to FFFFxxxx.
* When exporting a file, the inf file now has variable length hex addresses depending on the source filing system.
* When exporting an image's contents as a CSV, the hex addresses are now variable length, as per inf format.
* Hex Dump is now File Viewer.
* Show Hex Dump in the context menu is now Show File Contents.
* File Viewer will now show text, obey or BBC BASIC files as text on a separate tab.
* When exporting a file from DFS, which does not have a directory specifier, the root is added to the filename in the inf file.

Bug fixes
* Introduced a bug in 1.05.16 where the DFS load and execution addresses were 03xxxx instead of FFxxxx.
* Loading a DFS image, then creating a new ADFS S image caused the application to crash.
* The File Viewer did not always display the last line in the Hex Dump view.
* The initial directory arrow button did not appear when an entry is added to a new directory.

1.21 - 21st April 2021
----------------------
New or improved features
* Double clicking on a file, if it is recognised as a PNG, Bitmap or JPEG, is displayed alongside the Hex Dump of the same file.
* Double clicking on a sprite file will display the sprites alongside the Hex Dump.
* ADFS directories are now read in, in their entirety, and written back out, in their entirety using a directory cache. This gets around the issue of fractured ADFS directories which occur with Big Directories.
* The reading and writing of bytes (single, double, triple and quadruple - i.e. 8 to 32 bit lengths) has been improved.
* The extending of ADFS big directories has been disabled, for now. However, due to the using of a directory cache, the writing to such directories is now possible, as long as they do not need extending, which will return a fail.
* Creating a new, blank, ADFS image will now title the disc with a default name 'DiscImgMgr'.

Bug fixes
* Introduced a bug in 1.20 where some ADFS (and, possibly, other formats) images failed to open.
* The application has never been able to reliably read fractured directories from an Big Directory New Map image. A fix has been effected, which caused the above bug in the first place.

1.22 - 24th April 2021
----------------------
New or improved features
* Root address, for ADFS new map, is now reported in File Details as an indirect address instead of a direct address.
* Fixing ADFS directories now works on a cached copy of the directory before writing it all back.
* Now extends ADFS big directories, fragmenting them if necessary.
* Now contracts ADFS big directories. This copies the ADFS behaviour of leaving the original fragments as they were when bigger, but still reduces the directory size.
* Texture tiled the Sprite tab and image tab in the file viewer.
* BBC BASIC file viewer is now white text on blue background.
* Changed the way that ADFS files and directories are renamed and re-titled.

Bug fixes
* Found a bug where the ADFS new map wasn't being written correctly when objects were added.

1.23 - 26th April 2021
----------------------
New or improved features
* When a spark archive is added, a check is done to make sure that the contents will fit before commencing de-archiving. If it will not then the archive will just be added as is, assuming that will fit.

Bug fixes
* When importing the contents of a Spark archive (zip file), and the image gets full, the application would still attempt to add the rest of the files, sometimes corrupting the image. It now aborts the operation.
* The allocation of fragments for ADFS new map was not taking the minimum fragment size into account, and was also not sector aligning the objects. This resulted in some images being unreadable by ADFS and/or causing RISC OS to hang.
* Some sizes where not getting reported correctly, losing any initial zeros in the decimal part.

1.24 - 28th April 2021
----------------------
New or improved features
* Copying how ADFS assigns fragments, the application now tries to centralise fragments around the root, in a multi-zone ADFS new map image.
* Created a custom error/confirmation/message dialogue box in a RISC OS style.
* Reduced the initial size of the main form.

Bug fixes
* After re-titling a directory, saving the image, then either closing the application or closing the image, the application would still think that there are unsaved changes.
* The buttons in the Split DFS facility had got swapped round and then did not make sense.
* A bug was introduced in 1.23 where, when saving a UEF, the data block was not made big enough before trying to write some data, resulting in some parameters not being written correctly.
* On Windows, when a file was double clicked to open in the File Viewer, it also triggered the drag and drop copy operation in the directory tree.

1.25 - 9th May 2021
-------------------
New or improved features
* Tidied up some code dealing with saving UEF files.
* Can now create new, blank, ADFS hard drive images. Min size 20MB; max size 1000MB.
* A BBC BASIC file is now beautified.
* Added option for the command line to create an ADFS hard drive image.
* Resized the New Image dialogue box.
* Changed the buttons in the New Image dialogue to the 'RISC OS' style being used in the application, and swapped them around.
* Added image format, map type and directory type to the Image Details dialogue.
* Added a platform logo to the Image Details dialogue.
* Changed the buttons in Image Details dialogue to the 'RISC OS' style.
* Removed the 'Side 0' when the image only has a single side, in Image Details dialogue.
* Changed the filters in the Save dialogue boxes, and in the Open Image dialogue box.
* The filter in the Save Image dialogue box now matches the detected format of the currently open image.
* New DFS and Commodore images are now titled, as per ADFS.
* Speeded up the creation of the free space graphic(s).
* When Image Details is clicked, the cursor changes to an hourglass.
* The Progress window now shows the cursor as an hourglass.

Bug fixes
* UEF files were getting saved uncompressed by default. This has been changed to saving compressed by default.
* When checking multizone ADFS discs for free space, zone 0 was missed.

1.26 - 20th May 2021
--------------------
New or improved features
* Can now edit the load and execution addresses for ADFS,DFS and CFS files (click on the appropriate field).
* Improved the lookup for the filetype names, and added a method to lookup a filetype from a name.
* Added another 11 RISC OS filetypes to the list, bringing the total to 1218.
* Can now edit the filetype for a RISC OS ADFS file (click on the filetype or the graphic).
* Can now edit the timestamp for a RISC OS ADFS file (click on the time/date).
* Viewing a text file in the file viewer now uses a different container to viewing BASIC files.
* Clicking on the CRC32 number will copy it to the clipboard, briefly turning it blue to indicate this.
* The button to copy the CRC32 to clipboard has been removed.
* Hints have been added, indicating that a field is editable or copyable, to the various fields.
* Filename, Parent, Length, and Location can now be clicked on to copy to clipboard.

Bug fixes
* Corrected a few minor mistakes in the RISC OS filetype list.

1.27 - 29th May 2021
--------------------
New or improved features
* Improved the file opening/reading procedure.
* Made the progress window slightly bigger to completely cover the main window.
* Slightly re-jigged the procedure to download files from images.
* Application now captures CTRL+C and CTRL+V keystrokes (or CMD+C and CMD+V on macOS) for copying and pasting of files. However, there is no code behind this as yet.

Bug fixes
* There were still some DFS images that were failing checks.
* The Text Viewer tab, in the File Viewer window, was still visible even when not used.
* Some UEF files were not getting inflated properly and, hence, unreadable.
* Zero length files were not getting handled correctly from DFS images.

1.28 - 4th June 2021
--------------------
New or improved features
* Slight speed increase for reading in Spark files by not using the GUI. This means that the application will need to re-read in the image once done. This will depend on the number of files in the archive.
* When importing a Spark archive, all errors are skipped, but logged. Any errors will then be displayed after the import.
* Will try and detect a text file from the contents, and display as a text file in the File Viewer.
* Whether an ADFS L shape image is interleaved or not is now attempted to be detected based on the number of broken directories.
* Improved the Spark module. It now ignores the OS flag and looks for the ARC0 signature, as per David Pilling's !SparkFS. This means that previous archives that where the application did not preserve the load and execution address now does.
* Because of improvements to the Spark module, the application is now able to tell if the open image shape is suitable for the incoming archive contents and asks the user if they wish to proceed if not.
* When an image is opened (or new one created) the root node is automatically selected.

Bug fixes
* An ADFS Big Directory hard drive image created by Disc Image Manager would not be recognised by RISC OS.

1.29 - 15th June 2021
---------------------
New or improved features
* The Spark module will now import PackDir archives.
* The import of one image into another now uses the Error Log to report errors.
* New Preferences button and menu item to open a preferences dialogue box to set up some options - window texture; ADFS L interleaving.
* Changed the main menu item 'Tools' to 'Utilities' and 'Help' to 'Tools'.
* The ADFS/Amiga map type and directory details on the status bar are now blank if it is not an ADFS or Amiga image.
* Changed the hint for Open Image to "Open Existing Image".
* Changed the way that files were copied within the same image. It will now, by default, delete any file with the same name in the destination when copying a file, but fail if copying a directory. This is overridden by the GUI by renaming the file prior to executing the copy method in the class.
* Moving a file or directory will now fail if one of the same exists at the new destination.
* Opened up the copy method to copy a file to the same destination as the source.
* Pressing Escape will cancel a drag drop operation.
* Files can now be moved or copied in UEF files.
* Files can now be duplicated (copied) on the same side of a DFS image and on a Commodore image.
* Slight re-alignment when picking up a file to initiate a drag/drop copy/move operation.
* New toolbar button, main menu item, and context menu item: Duplicate File. Works just as dragging and dropping a file onto the same parent.
* When importing an image into another image, a dialogue box is opened to pick which files or directories to import.
* Moved the buttons on the Hard Drive selector dialogue.
* Changed the buttons on the Split/Combine DFS tool to be RISC OS orientated.
* Spark archives are now treated as a filing system (read only).
* The facility to check if the current open image would be suitable for the incoming import has now been extended to importing from all disc images.
* When adding a file to an image, if one of the same name exists already it will get overwritten (after confirmation from the user).
* When downloading files, the original selection would be restored.

Bug fixes
* Importing from one image to another would crash if the parent directory could not be found.
* Moving a file, while it is open in File Viewer, would result in the window title bar being updated to the parent of the file's new location, and not including the filename.
* It was possible to pick up the root directory and drag it into another folder to initiate a copy/move operation, which would then crash the application.
* Some file system format strings were being returned with an extraneous space at the end.
* The error reporting an invalid image when the user tries to load something not recognised stopped being reported a few versions ago. This has now returned.
* Selecting and then deleting multiple files ended up with only deleting half the selection, or crashing the application (if there were an odd number of files selected).
* When renaming a file to just change the case, an error was raised that the file already exists.
* Could not download the entire of the second side of a DFS image if the side 2 root is selected.
* Selecting addition objects would sometimes trigger off the drag/drop operation.
* On the Mac pressing CTRL with left mouse click to select an additional file would also bring up the context menu.

1.30 - 19th June 2021
---------------------
New or improved features
* Added more texture tiling options: RISC OS 3 style, Iyonix style and RISC OS Pi style.
* Increased the size of the preferences dialogue to accomodate the extra tiles.
* Can now read in Acorn FileStore Level 3 images, either on their own or as an ADFS partition.
* More tweaking of the ADFS ID functions to allow the detection of Acorn FileStore partitioned images, and to get the proper interleaving method for the image.
* ADFS image sizes below 800K, which are not 160K, 320K or 640K, are now marked as 'unknown' and given the extension 'dat' when saving.
* Added extra option in preferences to turn the logging of debug information on or off.
* Added extra command line option to turn the logging of debug information on or off.
* Clicking on the application icon in the About Box will report the debug log file's location.

Bug fixes
* When 'no tile' is selected, the filetype icon background would appear the wrong colour.
* ADFS ID process now recognises an Acorn FileStore Level 3 partition and no longer rejects the image as invalid despite having a valid ADFS partition.
* The application's icon in the About Box has always been hidden, since the porting to Lazarus.

1.31 - 27th June 2021
---------------------
New or improved features
* Added file extensions *.afs and *.zip to the Open Image dialogue box as options for Acorn FileStore and !Spark archives, as they were missing.
* The File Viewer window can now be resized on the BASIC viewer, Text viewer or Image viewer. It is still restricted on the Hex Dump viewer and Sprite viewer.
* The File Viewer window's size is now remembered, during the same session (but forgotten if the disc image is ejected).
* When viewing a text file, CR (0x0D) is now used as an end of line.
* When downloading a file from an image, the supplied filename is used if it is just the one file being downloaded.
* Change of format name from Acorn FileStore to Acorn FS (for Acorn File Server).
* Improved the ID-ing of Acorn ADFS and FS images to take account of the three types of interleaving.
* Changed the options for interleaving and added an extra one. There is now 'Automatic', 'Sequential', 'Interleaved', and 'Multiplexed'.
* Can now read in Acorn FS Level 2 images.
* Clicking on the disc icon in the About box will now copy the path and filename of the log file to the clipboard. The message is also now clearer.
* Now deals with Acorn FS Level 3 references to the parent directory better.
* Free Space Map for Acorn FS Level 3 images is now read in with disc size and free space displayed.
* Image details window now shows split free space maps with ADFS/Acorn FS Hybrid images.
* When saving an image, the directory from where it was loaded is offered as a saving location. If this was created in application, then the last directory used is offered.
* Added facility to attempt to prevent the application going into an infinite loop when reading an Acorn FS image.

Bug fixes
* When changing the texture for the background, the main window was not being updated in Windows.
* The log file was produced whether the option in the preferences was set or not.
* When editing a filename and the mouse was moved away to do other operations, the edit box remained.

1.32 - 4th July 2021
--------------------
New or improved features
* With multi-partition (side) images, clicking on files or directories will change the total size, free space and disc title displays in the status bar to refer to that partition/side.
* ADFS/AFS hybrid images now has separate titles for both partitions, albeit the ADFS one is a default 'AFS L3'.
* Can now load DFS images that have MODE 7 control characters in the title (i.e. top bit set characters).
* Added a preferences option to allow DFS images where it specifies a zero number of sectors. Such images are then given a default size of 200K.
* Additional checks have been added to the ID process for DFS. Each file's location and length are checked against the reported disc length to make sure that they are on the disc. If no size is reported, 200K is assumed.
* Fixing ADFS directories will no longer attempt a fix on ADFS L images where the directory header and footer do not contain 'Hugo', and there are zero entries. This is because this could be caused by incorrect interleave option.
* Creating a blank ADFS L image now takes account of the interleave option in preferences.
* Can now create a blank Acorn FS Level 2 and 3 image (untested on real, or emulated, system).

Bug fixes
* Sometimes just clicking on a DFS root directory, or just generally in the directory listing but not over an entry, would cause the application to crash.
* When the texture is changed the old texture would still remain under the filetype graphic on the File Details pane.

1.33 - 10th July 2021
---------------------
New or improved features
* Finishing off the creating of Acorn FS Level 2 images, the number of free sectors and pointer to first free sector fields in the allocation map are now written to the allocation map.
* Finishing off the creating of Acorn FS Level 2 images, reserving sectors 1 and 801, as they are not used, are now written to the allocation map, and the position of the root and the two allocation maps adjusted accordingly.
* Finishing off the creating of Acorn FS Level 2 images, blank chains in the allocation map now skip over used sectors, and the map is now terminated correctly.
* The file extension is now used, for DFS images, to confirm whether single or double sided when the 'Allow Zero Length' options is set and it is unsure what to ID the image as.
* Added option when creating a new image to create password file for Acorn FS images.
* Added context menu item to create password file (currently disabled).
* Added context menu item to save partition (currenty disabled).
* Added context menu item to delete partition (currently disabled).
* Added main menu Partition and added Create Password File, Save Partition As, and Delete Partition to it (all currently disabled).
* Added keyboard shortcuts to the main and context menu items.
* Changed the way the free space map is calculated for Acorn FS.
* Saving a DFS image no longer strips the MODE 7 control characters, if present, from the disc title.
* Can now add files to an Acorn FS Level 2 and Level 3 image.
* Can now add directories to an Acorn FS Level 2 and Level 3 image.
* Can now rename files on an Acorn FS Level 2 and Level 3 image.

Bug fixes
* AFS Level 2 images were wrongly created as multiplex interleaved.
* The extra checks on DFS images caused certain legitimate images to be rejected.
* The second side of a DS DFS image, where the reported sectors was zero, caused the image to be IDed as a SS image.
* The second side of a DS DFS image, where the first two sectors were zeros, caused the image to be IDed as a SS image.
* File lengths were not getting read correctly on Acorn FS Level 2 files.
* Load and Execution addresses where not getting displayed with Acorn FS files.
* There were some writes, specifically for ADFS and AFS, that would not happen because the application failed to find the parent directory. This was a bug introduced in an earlier version.
* When creating a directory in ADFS or Acorn FS the GUI would get 'confused' about who the parent of this new directory was. It seems that the appropriate flag and field where not getting updated. It would work OK if this image was then saved and re-opened.

1.34 - 17th July 2021
---------------------
New or improved features
* Added a couple of extra fields to the backend's directory records for parent and sector location.
* Deleting files and directories from an Acorn FS image is now possible.
* Added graphics for the four new menu items: Add Password File, Edit Password File, Save Partition and Delete Partition.
* Added buttons for the four new functions: Add Password File, Edit Password File, Save Partition and Delete Partition.
* Main form initial size increased to take account of the four new buttons.
* Directories now get expanded on Acorn File Server images if needed.
* Files can now be moved within an Acorn File Server image.
* Load and Execution addresses can now be edited with Acorn File Server images.
* Datestamps can now be edited with Acorn File Server images.
* File attributes for Acorn File Server images can now be edited.
* Disc title for Acorn File Server and ADFS/AFS Hybrid images can now be changed.
* IDing for DFS now checks for blank filenames, and rejects images that have any.
* The Free Space display now shows the interleave type used, and hides any fields not in use for the format.
* Can now create new Acorn File Server images from the command line.

Bug fixes
* A bug was introduced in the previous version where some Old Map ADFS images would crash the application.
* Changed the code so that a potential bug, where a parent directory was renamed but the parent field of it's descendants were not updated, should not occur.
* Opening a file in File Viewer, where the filename has top-bit set characters, caused the application to crash.
* Adding of files to an Acorn FS Level 3 image never updated the free space map.
* The Acorn FS Level 2 free space map was sometimes not updated correctly, due to the wrong map size being recorded in the header.
* A bug was introduced in an recent version where downloading files, particularly a selection of files, resulted in the complete image path being given as the filename.
* If a file, on a Commodore image, had a dot '.' as part of the name then this would fail to be found. This means that operations such as downloading would not work.
* An AFS Level 2 image, where the headers do not match, were getting IDed as a DFS image.

1.35 - 1st August 2021
----------------------
New or improved features
* Added a window for editing the Acorn FS 'Passwords' file, and enabled the button.
* Password files for Acorn FS images can now be edited.
* Enabled the button to create a new password file.
* Split the toolbar into 4 toolbars, and re-arranged the buttons (moved 'Fix ADFS Directories' to Tools).
* New menu - 'View', with three items to enable the viewing, or hiding, of the File Details pane, Image Details status bar or the Toolbars.
* Changed the main menu to reflect the new grouping in the toolbars.
* Delete Partition now works for DS DFS images (producing SS DFS images) and ADFS Hybrid (producing either ADFS or Acorn FS images).
* Save Partition now works for DS DFS images (producing SS DFS images) and ADFS Hybrid (producing either ADFS or Acorn FS images).
* Slight change to the format strings for Acorn ADFS Hybrid images.
* Two single sided DFS images can now be combined to form a double sided image, away from the Split/Combine DFS utility.
* Split/Combine DFS button, and menu item, removed from the toolbar and main menu, along with the Utilities menu.
* Functions to do with Partitions and AFS Password files removed from the File context menu.
* Added the function to Add Partition to ADFS 8 bit images, along with the corresponding menu item and tool bar button.
* Improved the free space calculation with Acorn FS partitions.

Bug fixes
* Deleting a file in Acorn FS Level 3 did not release the object header sector.
* Reading the second side of a double sided DFS image would read the filenames from the first side.
* A DFS directory identifier as '&' would result in an underlined '.' in the file details display.
* Failed to import any files to the Acorn FS partition of an ADFS/AFS Hybrid.
* The attribute panel would be shown when a root directory is selected.
* The Free Space Map for ADFS/AFS hybrids was not getting read correctly.

1.36 - 22nd August 2021
-----------------------
New or improved features
* Added button and menu item for Defrag/Compact.
* Added button and menu item for Change Interleave.
* Implemented Defrag/Compact functionality.
* On import, the Import Selector dialogue takes account of which side/partition is being imported to and automatically selects the appropriate side/partition on the incoming image, if appropriate.
* Implemented Change Interleave for ADFS and AFS.
* Added command line options for defrag and change interleave.

Bug fixes
* The Import Selector dialogue did not include a tick box for the second side/partition of a double sided DFS, or an ADFS/AFS Hybrid.
* When adding files (specifially multi-zoned ADFS New Map), some would fail to write because the application was trying to write them off the end of the partition.
* Deletions, additions and renames were not working on the Acorn FS partition of a hybrid image.
* Writes, where the file would get fragmented, was not implemented. This was because the function which allocates fragments had not been fully completed to account for fragmenting an object.

1.37 - 4th September 2021
-------------------------
New or improved features
* Can now read MS-DOS and DOS Plus images and partitions.
* Changed the AmigaDOS root name to 'DF0:'.
* Added new filetype graphics for Commodore 64 files.
* Added a new graphic for non-Acorn and non-Commodore 64 files.

Bug fixes
* There was a potential for the application to crash when reading the Acorn FS free space map.
* When an ADFS/AFS Hybrid image was open, the ADFS attribute panel was shown whether an ADFS or AFS object was selected.
* The wrong icons were getting used for Acorn File Server files.
* The file attributes for a Commodore 64 file where not correctly positioned on the form.
* Modified the code in attempt to stop the icons growing in the directory listing, and to tile the background under the filetype icon on the File Details pane.

1.38 - 15th September 2021
--------------------------
New or improved features
* Can rename files and directories in DOS Plus images.
* Can delete files and directories in DOS Plus images.
* Can update file attributes in DOS Plus images.
* Can retitle DOS Plus volume names, including those as partitions on ADFS hybrids.
* Can update the time stamp for files and directories on DOS Plus images.
* Details are now displayed for the DOS Plus root.
* Filetypes are now displayed for DOS Plus files/directories.
* Can add files to a DOS Plus image.
* Added 'Sinclair Spectrum hard drive (*.hdf)' as an option in the Open Existing Image dialogue.
* Added 'All Sinclair Spectrum (*.dsk;*.hdf)' as an option in the Open Existing Image dialogue.
* Moved 'All files (*.*)' to the top of the list in the Open Existing Image dialogue.
* Can create new directories on DOS Plus images.
* Changed the filter for 'All files' from '*.*' to '*'.
* Can save the DOS Plus partition from an ADFS/DOS Plus hybrid.
* Can save the ADFS partition from an ADFS/DOS Plus hybrid.
* Can delete the DOS Plus partition from an ADFS/DOS Plus hybrid.
* Can delete the ADFS partition from an ADFS/DOS Plus hybrid.
* Changed the "New Image" dialogue layout to get the items equally spaced on all options.
* Added a new option to the "New Image" dialogue - 'DOS Plus/DOS' along with the corresponding image shape sub-options.
* Added radio boxes to the "Add Partition" dialogue for Acorn File Server and DOS Plus.
* Changed the title bar for "Add Partition" from 'AFS Partition Size' to just 'Partition Size'.
* Tiled the "Add Partition" dialogue, as it had been missed previously.
* Different directory separators are now specified with ADFS/DOS hybrids.

Bug fixes
* When reading in a DOS Plus directory, if the first character of the filename is 0x05 this is now replaced with 0xE5 instead of just skipping the entry.
* DOS Directories were read direct from the data instead of being read into a buffer. This could result in the directory not being read correctly, particularly if it was fragmented.
* The function to determine if a cluster number was valid sometimes returned a false positive.
* Writes to an Acorn FS or DOS Plus partition of an ADFS hybrid sometimes failed to work correctly.
* At some point in a previous version, the root name 'dropped' off the parent property for ADFS files. This meant that the search results returned files with the root missing from the pathname and therefore unable to locate when clicked on.

1.39 - 26th February 2022
-------------------------
New or improved features
* When the root directory is selected, the 'Directory Title' field now reads 'Disc Title' and changing the text will update the disc title of the image, instead of failing with Acorn DFS.
* The Display Free Space button's hint text has been changed to 'View/Edit Image Details' to more accurately reflect the dialogue box.
* Extended the ADFS interleave options beyond ADFS 'L'. Forcing an interleave option will use that option for any ADFS format, not just 'L'.
* Can now change the interleave method for any ADFS image, if the interleave is forced using the options (i.e., not automatic).
* Compiled using Lazarus version 2.2 which should fix some bugs outside the control of the author.
* Added option to stop DFS validation failing if there were files that went over the edge of the disc.
* Added option whether to compress UEF files or not in the GUI.
* Added option stop DFS validation failing on blank filenames.
* Adjusted the Acorn FS Level 3 slider when creating new images to be more accurate.
* Added in some extra code to read in copy protected Elite tape images, and others using a similar protection.
* Restricted the maximum AFS L3 size to be 128MB-1, until I work out the different format introduced in 1988 by Acorn.

Bug fixes
* Creating a double sided DFS image failed to work.
* Creating a Watford DFS image failed to work.
* When the ADFS filename is shorter than the available characters required for the attributes, not all the attributes were read in. This manifested itself with a directory entry shorter than 4 characters.
* Importing files with a filename longer than allowed were still getting added to DFS and UEF images.
* An extra byte (NUL) was added to UEF files when saving, causing some emulators to get confused.
* The ID process still checked images even if it had already been identified.
* The maximum size for an Acorn FS Level 2 image is 1MB, not 512MB. The selector has been adjusted accordingly.
* When reading the header for an Acorn FS Level 3 image, the incorrect disc size was read. Anything over 16.7MB was read incorrectly.
* Some areas of the file details panel on the main window were not getting repainted correctly with the selected tile.

1.40 - 28th March 2022
----------------------
New or improved features
* macOS application package now tells the OS that it can accept certain extensions (i.e. become a 'Recommended App').
* The OS and CPU description has been changed, slightly, in the About dialogue.
* Added the ability to recognise, and use, a double sided hybrid DFS image (i.e. Acorn/Watford).
* Added option in the preferences to either scan all sub directories in an image upon loading or not to, for ADFS, Acorn FS, Amiga, and DOS Plus.
* Added colours to directories that are either not read in or broken (ADFS).
* Image Contents and File Details header text changed colour to green.
* Added the ability to create a blank DOS floppy image (360KB/720KB/1.44MB/2.88MB - all FAT12).
* Added the ability to create a blank 800KB DOS Plus floppy image.
* Added the ability to create a blank 640KB ADFS/DOS Plus Hybrid image.
* Enabled the Add DOS Partition to an ADFS image.
* Added limiter to the Add Partition dialogue box, which changes depending on which format.
* Temporary limit applied to AFS partition size of 127MB.
* Added the ability to create a blank DOS Hard Drive image (FAT12/FAT16/FAT32).
* Improved the separation of the ADFS partition from a hybrid image.
* Improved the separation of the DOS partition from a hybrid image. This will not result in a viable image when a DOS partition does not exist on the source partition.
* Begun improving the separation of the AFS partition from a hybrid image. This is still under development and currently does not produce a viable image.

Bug fixes
* The incorrect OS and CPU where reported in the About dialogue for macOS ARM.
* The incorrect keyboard shortcuts were used for macOS ARM.
* A Watford DFS double sided image would get incorrectly IDed as an Acorn DFS double sided image if both sides were different sizes.
* Sometimes the file info panel would not get fully repainted.
* When saving an image, some filters where not added.
* The DOS part of a 640KB ADFS/DOS partition was not getting read correctly.

1.41 - 12th April 2022
----------------------
New or improved features
* Can now read and write FAT32 images.
* Changed the parameters put into the header for a 640KB DOS image extracted from a Master 512 hybrid image, and moved the image further along the image.
* Can now create FAT32 images.
* Improved the function to format DOS images to be closer to Microsoft's specification.
* Changed the format number and text for plain DOS images.
* Changed the logo appearing next to the DOS text in the status bar when plain DOS images are open.
* Changed the logo in the Image Details dialogue for plain DOS image to the Microsoft logo.
* Changed the DOS Filename validation to match the Microsoft specification of illegal characters.
* Added Long FileName support for DOS FAT12, FAT16 and FAT32 volumes, but not Master 512 DOS Plus.
* Changed the method of downloading (extracting) files from an image in that it will now fail if the requested file takes the pointer beyond the end of the image file.
* Changed the error reported on failure to download.
* Improved the detection of FAT12, FAT16 or FAT32, based on Microsoft spec.
* Added new filetypes, and extra filters on the Open Image dialogue box, for FAT12, FAT16 and FAT32.

Bug fixes
* The Hard Drive image creator dialogue box would not always produce an exact sized image. E.g., a 64MB image would not always be exactly 64MB in size.
* The correct directory separator is now used with ADFS/DOS hybrid images.
* Acorn/Watford DFS, Commodore 64, Acorn CFS and Spark images were being opened with the 'directory been read' flag not set, so appeared as if the directories were unread.
* DFS images were still not correctly being IDed.

1.42 - 23rd April 2022
----------------------
New or improved features
* SparkFS images are now fully writable:
* Can write files to a SparkFS image.
* Can create a blank directory on a SparkFS image.
* Can rename files and directories on a SparkFS image.
* Can move and copy files and directories on a SparkFS image.
* Can change the timestamp on files and directories on a SparkFS image.
* Can change the filetype on files on a SparkFS image.
* Can change the load and execution addresses on files on a SparkFS image.
* Can change file and directory attibutes on a SparkFS image.
* Can delete files/directories from a SparkFS image.

Bug fixes
* SparkFS failed to extract the file data if it was the first file in the archive.
* If a ZIP file is read in where the reported number of entries does not match the actual number of entries, this would crash the application.
* If the directory entry, in a SparkFS archive, appeared after any of it's child entries, then these child entries would not get shown in the directory tree.
* A bug had crept in, at some earlier version, that crashed the application when the filetype was clicked on.
* When editing the date/time stamp, clicking on a field during editing would instead commence editing the selected node on the directory tree for renaming.

1.43 - 4th May 2022
-------------------
New or improved features
* Reports number of items in a directory in the File Details pane.
* Added more sanity checks on ID-ing a DOS or DOS+ image.
* Changed the order of ID-ing a format and moved DFS to the end.
* The Image Details dialogue now opens, with Free Space Map display, for AmigaDOS images.
* Attributes are now shown for files on an AmigaDOS image.
* Can now retitle an AmigaDOS image.
* CRC32 is no longer reported for directories.
* Improved the file extraction function for AmigaDOS images, and made it FFS compatible.
* TimeDate stamp is now reported for Amiga files and directories.
* Can create blank Amiga DD and HD floppy images, and blank hard drive images.
* Can create new directories on AmigaDOS images.
* Can write files to an AmigaDOS image.
* Can update the protect attributes on an AmigaDOS file/directory.
* Can date/time stamp an AmigaDOS file/directory.
* Can delete files/directories from an AmigaDOS image.
* Can move files/directories around an AmigaDOS image.
* Can rename files/directories in an AmigaDOS image.
* The file relating to the currently open DOS partition is now marked in green in the directory tree, and cannot be deleted.
* DOS Partitions will now only be searched for on Old Directory ADFS hard drives.
* Added an option to specify whether to automatically open DOS partitions on ADFS hard drives.
* Added an extra command line parameter to create DOS hard drive: DOSHDD|<size>
* Added an extra command line parameter to create Amiga hard drive: AmigaHDD|<size>
* Added extra command line parameters for creating DOS floppies: DOS+640, DOS+800, DOS360, DOS720, DOS1440, and DOS2880.
* Added a command line option to change the configuration options: --config or -cf.

Bug fixes
* When looking for a DOS partition on an ADFS hard drive, the drive was split as two separate drives. However, the DOS partition is a file held within the ADFS file structure and not a separate partition.
* The custom filetype entry box was not positioned correctly in the filetype dialogue.
* ADFS Filetypes and timestamps were getting reported for non ADFS formats and ADFS Old Directories.
* Sometimes reading a file off an AmigaDOS image would hang the application.
* During copy/move operations, the directory being hovered over expanded instantly which could cause issues. There is now a 1 sec hover delay before expanding.
* A failed delete, or the user clicking on 'No' to confirm a deletion, would leave the confirmation window open until it was a successful delete, or the user clicked 'Yes'.
* The configuration option to compress UEF images did not get saved to the registry.

1.44 - 18th December 2022
-------------------------
New or improved features
* Added a new class for accessing the registry.
* Added an option, when creating ADFS hard drive images, to add the 512-byte 'emulator header'.
* Changed some of the internal procedures so that they return a Boolean, instead of a structure, to make it easier to add multi-partition support.
* MMFS support has been temporarily removed.
* Added an option, when creating ADFS hard drive images, whether it will be an IDE drive or not. This fixes an issue where the resultant drive could not be read by RISC OS 3.11 in Arculator.
* ADFS Directories which have not been read in for reasons other than the flag not being set, are now reported as broken.
* ADFS broken directory error codes have been expanded. Now checks for non-sector aligned directories, invalid Start or End names (i.e. not 'Hugo' or 'Nick'), and any other reason it is found to be broken.
* When adding multiple files to an image, no format checking is done and the files are just added.
* When adding directories to an image, the progress indicator is shown.
* When IDing DFS images, any image over 400KB (200KB double sided) is rejected.
* Added the address of the file to the CSV output.
* Extra range checking when updating ADFS New Map fragments, and if any part fails, the original is restored from the backup.
* Moved the 'Waiting' and 'Progress Update' labels on the Progress dialogue window.
* Performed some code optimisation on ADFS New Map.
* Writing objects to ADFS New Map will now create, or re-use, shared fragments.
* When outputting a CSV file of the contents, a dialogue box is now presented to select which columns, with some options, are to be included.
* CSV output now prefixes all hex numbers with '0x' for easier importing into Excel/Numbers/etc.
* Added 'Show Report' button and window.
* Image report can also be included in the CSV output.
* ADFS Hardware information is now saved into hard drive images (ADFS New Map).

Bug fixes
* In ADFS and Acorn FS, if a file had the same sector as the root then the filename would be blank. This would usually happen with New Map ADFS (usually an 'E' floppy) where the root was addressed directly, but the files were addressed indirectly.
* Changing time/date on a file now updates the 'unsaved' icon in the status bar.
* Some ADFS New Map fragment IDs were being used more than once, so the checking on unique IDs has been tightened up.
* The ADFS disc size was being read in as the root size.
* The heads and sectors per track fields were not being read in with ADFS New Map.
* Sometimes the root on ADFS New Map was not being found, so this has been improved.
* Renaming a directory in ADFS caused issues when then adding files to it as it kept it's old name.
* Sometimes when writing a file on ADFS New Map, two (or more) files would have the same indirect address (fragment ID).
* When writing a file to ADFS New Map, the end of free space marker on a zone would be beyond the zone and trample the following zone. When subsequent files where then written, this would continue into the following zone(s).
* On ADFS New Map, the free space would sometimes be incorrectly reported meaning that some files were stored where there was not enough space to store the file.
* On ADFS New Map, the smallest possible space to contain a fragment ID and the stop bit was not taken into consideration, meaning that a file stored could then not be retrieved.
* Some ADFS New and Big directory object's attributes, that only had a single attribute, were having '00' appended to the end.

1.45 - 3rd March 2023
---------------------
New or improved features
* Removed the file type filter from the 'Add Files' dialogue box.
* Rewrote the function to reconsolidate the ADFS Old Map Free Space Map, sorting entries into order and removing unused ones.
* Styled the application more towards RISC OS style.
* Changed the toolbar on the main window to tabbed toolbars, as the 'coolbars' were not scaling correctly.
* Now creates an 'inf' file for the root directory when extracting to the host system.
* The 'inf' file created for directories now includes an extra field for the directory title.
* Made the scroll bars for the directories display now automatic. Now, they only appear when required.

Bug fixes
* Adding files to an ADFS Old Map would sometimes result in a 'Bad FS Map' when read by the MOS.
* When displaying an ADFS disc, the root directory title would be replaced with the disc name instead.
* When displaying BBC BASIC files, line numbers (after GOTO, RESTORE, GOSUB, etc.) were not getting displayed.
* Ignored the attribute setting, from an 'inf' file, when importing directories.
* Defrag would lose all the sub-directory's entries.
* Updating the free space map of an old map ADFS would blank off the root directory's 'StartSeq' number thereby causing a Broken Directory for the root.
* Deleting objects, from Old Map ADFS, did not update the Free Space Map correctly all the time. This was mostly noticable on Defrag when many files got lost because of lack of space.
* Deleting a directory, in ADFS, did not remove the reference from the internal array. The resultant image was usually unaffected.
* After a defrag, the application would sometimes crash for no apparent reason.
* The modified icon on the Image Details status bar was not being scaled correctly.
* The Image Details status bar was not getting fully repainted after a non-saved image was closed.
* The application would crash if an ADFS image had zero free space.
* Creating a 640KB ADFS L image, then adding a DOS partition would not result in the partition being visible.

1.46 - 18th May 2023
--------------------
New or improved features
* Image report now lists the free space map for ADFS.
* Add Partition button now works for DFS single sided images to add a second side.
* Exporting files now includes a date/time stamp field in the *.inf file if set.
* Importing files, where the *.inf file has a date/time stamp field, updates the date/time for the file.
* The ADFS interleave can now be changed without re-organising the data. This method then re-reads the file using the new method.
* Can now save a BASIC file to the host system as a text file.
* BASIC file viewer now uses smaller text and no longer bold, unless it is a keyword. Text in quotes is now in italics.
* Image report now checks every file and directory on an image and reports details of files with CRC32 error or broken directories (ADFS).
* When importing a file to an image, it no longer complains if the selected node is not a directory. Now, it just selects the selected node's parent before importing the file.
* The BackSpace key is now a shortcut for deleting files or directories.

Bug fixes
* When deleting directories, the internal directory references were not getting updated.
* When deallocating free space on a New Map ADFS, the wrong idlen was sometimes being used.
* The New Map ADFS free space map was not getting read correctly.
* Renaming an ADFS file in a ADFS/DOS hybrid image could crash the application on Windows. Renames on the DOS or Acorn FS side could also fail.
* Broken ADFS directories were getting displayed with the 'Not Read' colours.
* A corrupt 'JesMap' sector, on Acorn FS, can cause the application to crash. Additional checks have been put in place.
* An ADFS Old Map, with no free space, would hang when trying to delete a file.
* In ADFS, when selecting a sub-directory the image details status bar would sometimes report no image title, 0 bytes used and 0 bytes free.
* When an ADFS New Map zone is close to capacity (i.e., not enough space for a fragment id to be written in), the free space was incorrectly reported. This would cause files and directories to fail to being written but the catalogue information would still be.
* Deleting an ADFS directory which is the penultimate directory in the catalogue would result in the last one being deleted from the internal references. This then caused confusion with the front end GUI and resulted in a crash. In addition, deleting everything from the image would leave the free space map not correctly updated.

1.47 - 12th June 2024
---------------------
New or improved features
* Font size on the BBC Basic Viewer can be changed.
* Added the ability to use the mouse scroll wheel on a hex dump.
* Read Acorn ROM FS images.
* When reading UEF images, each CFS header is checked to be valid before reading.
* Create blank Acorn ROM FS images.
* Add files to Acorn ROM FS images.
* Delete files from Acorn ROM FS images.
* Some minor code changes (creation of new images).
* Command line parsing has been completely removed and replaced by a command line console.
* Attributes are now validated before applying.
* CSV output now includes the option for MD5, per file.
* Button added to allow loading of multiple images and outputting a CSV of each file.
* Copy and move files within an Acorn ROM FS image.
* Update the title, copyright and version strings in an Acorn ROM FS image.
* Added option to generate a *.dsc file for ADFS hard drive images when saving (if none already exist).
* DOS images can now import *.inf files.
* DFS disc titles are now padded with nulls and not spaces.

Bug fixes
* OS dark mode: most of the controls do not react to the change from light mode to dark mode. The changing of the font colour sometimes made them hard to see with the tiling selected.
* The Hex Dump dialogue was not scaling correctly with Hi-DPI setups.
* Not all BASIC files are terminated with 0xFF. This fooled the BASIC detector in the Hex Dump viewer.
* If the creation of a new image fails, the application still thought that there was an image open.
* When renaming a file, or editing the load or execution addresses, pressing the BackSpace key would attempt to delete the file, instead of deleting the text.
* It was possible to remove the 'D' attribute of a directory, or add one to a file.
* If the last line in a hex dump text output was less than 16 bytes, then the position of the ASCII representation would not line up with the columns above.
* MS-DOS 6.22 failed to properly read a floppy image created by the application. Changed a few settings in the header when formatting a new image.
* Fixed some quote placement errors in the CSV output.
* WINDOWS: The Cancel and Create buttons on the Hard Drive Creator dialogue box, for ADFS, did not fire when clicked.
* WINDOWS: Disabled Radio and Tick boxes would flash.
* Files ending in a forward or back slash would not be recognised.
* Some DFS images were producing a "phantom directory".
* When files were getting written to a DOS image, the same block was being used for each segment of the file resulting in the file being overwritten by itself.

1.48 13th April 2025
--------------------
New or improved features
* Added keyboard shortcuts to the confirm/error/information dialogue boxes.
* Added a fourth button to the confirm/error/information dialogue boxes.
* Revamped some of the code to produce confirm/error/information dialogue boxes.
* Changed some of the errors reported in console mode as the ones reported were mis-leading.
* Added option to add implied 'RW' attributes to the *.inf file when exporting files from DFS/CFS/RFS to the host system.
* Expanded the diagnostics reports in the debug file.
* Major overhaul of all the functions and procedures to ensure proper variable initialisation.
* In the console, passing the 'config' command without enough parameters would list all the valid parameters instead of producing an error.
* In the console, the 'status' command now lists the configuration options alphabetically.
* In the console, the prompt will differ in colour depending on the image status: no image loaded - black; unmodified image loaded - blue; modified image loaded - red.
* Added a new command to the console, 'search'. This is similar to 'extract', but just lists the files found rather than extracting them.
* Added a new wildcard to file search, '|'. This needs to be the first character and is an exclusion, so that any files found following this are excluded from the search results.
* Added a new command to the console, 'find'. This is similar to 'add', but just lists the files found on the OS folder rather than adding them.
* Added a new command to the console, 'ls'. This catalogues the files in the local OS folder. The same as 'find *'.
* Added a new command to the console, 'type'. This sets the filetype for a file.
* Some text formatting and improvements in the console text.
* Wildcards are now accepted for the console commands 'access', 'exec', 'load', 'type' and 'stamp'.
* Added new commands to the console, 'compact' and 'defrag'. These are identical and will perform a defrag, or compact, the image, if possible.

Bug fixes
* ADFS directories would use the default ID (Hugo, Nick or SBPr/oven) depending on whether it is old, new or big. This would mean that images could end up with a mis-match of IDs, which Arthur ADFS was not keen on.
* Creating a UEF (Acorn CFS) image in the console would fail.
* Consolodation of an old map ADFS free space map would sometimes result in an image that ADFS considered a "Bad FS Map".
* Decompacting an ADFS Old Map image a second time after decompacting would hang the application.
* Creating a new ADFS Old Map image, then adding a new directory, renaming then deleting would fail to delete. This bug is related to the failure to decompact bug.
* FAT12 HDD sizes of above 31MB were permitted to be created, which will produce invalid images.
* When changing the load and execution addresses of a file, editing one then clicking on the other would make the one you were editing disappear.
* Defragging (compacting) an image with no free space would fail and not revert back to the original image. Now, it fails and returns to the original image with no changes made.

1.49 4th October 2025
---------------------
New or improved features
* Remembers the last used format when creating a new image.
* Can now specify the disc title when creating a new image.
* When run from the console/command line with no parameters, it will open the console automatically without the -c or --console paramter being specified.
* Added a new console/command line parameter, '-g' or '--gui', to force the application to start in GUI mode.
* Added functionality to read in Sinclair Spectrum +3/Amstrad DSK images.
* Now shows the Interleave in use in the status bar.
* Added functionality to read in ISO images, with support for RISC OS and Amiga System Use Area tags.
* Tidied up the creation and parsing of *.inf files, to comply with the *.inf format spec written by Tom Seddon.

Bug fixes
* There were possibilities where a blank title, version or copyright string could be applied when updating an ROM FS Header.
* Create a blank !Spark file produced an invalid ZIP file.
* When files were added to a !Spark file, it created a new ZIP file with only this file inside.
* When importing files, sometimes a directory would not be created unless it was ADFS or Amiga.
* Importing files from one system to another sometimes failed as the path structure is different.
* Selecting a file on the directory listing sometimes resulting the details of another file being displayed.
* Creating a new sub-directory, or adding a file, to a sub-directory of the root on an Amiga format image would appear to fail.
* Importing from DFS to a directory capable system, apart from ADFS or Amiga, would not create any subdirectories.
* Adding to a ZIP file would sometimes crash the application.
* A bug crept in, since version 1.47, where creating a new hard drive was limited to 30MB for all types.
* Selecting a file in a DOS partition of an ADFS/DOS hybrid image would fail to show the file's details.
* Removed the ability to change the interleave type in the image details dialogue box.
* Sometimes, the '.inf' was not appended to the end of extracted file's information files, which then overwrote the original file.
* A bug had been introduced where the directory icon for the root of a DFS disc was not getting displayed correctly.

Platform History
----------------

Version 1.04 and lower : Windows 32 and 64 bit
Version 1.05           : macOS 64 bit added
Version 1.05.1         : Linux 64 bit added
Version 1.05.3         : macOS 32 bit added
Version 1.05.9         : Linux 32 bit added
Version 1.05.10        : Raspbian OS 32 bit added
Version 1.35           : No Raspbian OS 32 bit version
Version 1.39           : macOS ARM added
Version 1.47           : Raspbian OS 64 bit added